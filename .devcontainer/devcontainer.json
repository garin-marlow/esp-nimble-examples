{
    "name": "ESP-IDF",
    "build": {
        "dockerfile": "Dockerfile"
    },

    // Add arguments passed to 'docker run'
    "runArgs": [
        "--device=/dev/ttyUSB0:/dev/ttyUSB0" // Pass the device from host to container
        // You might need --group-add <gid> if not running as root and permissions fail.
        // Find host GID with: getent group dialout | cut -d: -f3  OR  ls -l /dev/ttyUSB0
        // Example: "--group-add=20" if the GID is 20
    ],

    // OPTIONAL BUT OFTEN NEEDED FOR DEVICE ACCESS: Run as root inside the container
    "remoteUser": "root",

    "userEnvProbe": "loginInteractiveShell",

    // VS Code specific configurations
    "customizations": {
        "vscode": {
            // Extensions list moved here
            "extensions": [
                "espressif.esp-idf-extension",
                "ms-vscode.cmake-tools",
                "ms-vscode.cpptools"
            ],
            // VS Code settings moved here (recommended)
            "settings": {
                "idf.showOnboardingOnInit": false,
                "idf.toolsPath": "/opt/esp",
                "idf.espIdfPath": "/opt/esp/idf",
                "terminal.integrated.shell.linux": "/bin/bash"
            }
        }
    }
}